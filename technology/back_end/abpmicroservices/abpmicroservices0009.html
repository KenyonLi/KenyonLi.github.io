<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.63">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/logo_v.png"><meta name="keywords" content="kenyonli"><title>微服务分布式事务-servicecome-pack | Kenyon Li 随笔 </title><meta name="description" content="欢迎您，来到 Kenyon Li 世界！">
    <link rel="preload" href="/assets/style-d5da7002.css" as="style"><link rel="stylesheet" href="/assets/style-d5da7002.css">
    <link rel="modulepreload" href="/assets/app-c1c3c937.js"><link rel="modulepreload" href="/assets/abpmicroservices0009.html-9ac9702e.js"><link rel="modulepreload" href="/assets/abpmicroservices0009.html-1a1fd836.js"><link rel="prefetch" href="/assets/index.html-0c5df828.js" as="script"><link rel="prefetch" href="/assets/index.html-122d66cc.js" as="script"><link rel="prefetch" href="/assets/index.html-1565d8e0.js" as="script"><link rel="prefetch" href="/assets/index.html-6eb9f9a2.js" as="script"><link rel="prefetch" href="/assets/lan_dao.html-f8b49934.js" as="script"><link rel="prefetch" href="/assets/mo_fei_din_lu.html-e84486e3.js" as="script"><link rel="prefetch" href="/assets/read01.html-3499d74d.js" as="script"><link rel="prefetch" href="/assets/yan_pi_juen.html-ebc74c11.js" as="script"><link rel="prefetch" href="/assets/object_oriented_analysis.html-c0b97768.js" as="script"><link rel="prefetch" href="/assets/design001.html-683e1b25.js" as="script"><link rel="prefetch" href="/assets/design002.html-d00aa6ad.js" as="script"><link rel="prefetch" href="/assets/design003.html-ac2e30f0.js" as="script"><link rel="prefetch" href="/assets/ea001.html-e8ab0da6.js" as="script"><link rel="prefetch" href="/assets/ai0001.html-fbb9c4b1.js" as="script"><link rel="prefetch" href="/assets/abp001.html-4d078b9b.js" as="script"><link rel="prefetch" href="/assets/abp002.html-361c1354.js" as="script"><link rel="prefetch" href="/assets/abp003.html-370e112b.js" as="script"><link rel="prefetch" href="/assets/abp004.html-2a550719.js" as="script"><link rel="prefetch" href="/assets/abp005.html-b7b8040d.js" as="script"><link rel="prefetch" href="/assets/abp006.html-afe3148a.js" as="script"><link rel="prefetch" href="/assets/abp007.html-c73814a2.js" as="script"><link rel="prefetch" href="/assets/abp008.html-3c920bb6.js" as="script"><link rel="prefetch" href="/assets/abp009.html-5aa18139.js" as="script"><link rel="prefetch" href="/assets/abp010.html-2f60cd08.js" as="script"><link rel="prefetch" href="/assets/abp011.html-144ed9f8.js" as="script"><link rel="prefetch" href="/assets/abp012.html-b0b755c1.js" as="script"><link rel="prefetch" href="/assets/abp013.html-07f9ef95.js" as="script"><link rel="prefetch" href="/assets/abp014.html-d9b342ae.js" as="script"><link rel="prefetch" href="/assets/abp015.html-2f03e87a.js" as="script"><link rel="prefetch" href="/assets/abp016.html-94352902.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0001.html-af71ea93.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0002.html-22ac1590.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0003.html-fe194269.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0004.html-c78a6bc2.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0005.html-658ff302.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0006.html-229b0517.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0007.html-943fd56b.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0008.html-c0fd71da.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0010.html-8139592f.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0011.html-da7de1f7.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0012.html-cf03f10f.js" as="script"><link rel="prefetch" href="/assets/index.html-e99c2026.js" as="script"><link rel="prefetch" href="/assets/csharp01.html-08c0927b.js" as="script"><link rel="prefetch" href="/assets/dotnet01.html-9daf028e.js" as="script"><link rel="prefetch" href="/assets/dotnet02.html-6c7c2a0a.js" as="script"><link rel="prefetch" href="/assets/index.html-6379db3c.js" as="script"><link rel="prefetch" href="/assets/socket001.html-7e4e5d27.js" as="script"><link rel="prefetch" href="/assets/elasticsearch001.html-da1479cf.js" as="script"><link rel="prefetch" href="/assets/elasticsearch002.html-bb49ddf5.js" as="script"><link rel="prefetch" href="/assets/kafka01.html-d20844e4.js" as="script"><link rel="prefetch" href="/assets/minio001.html-98035ebe.js" as="script"><link rel="prefetch" href="/assets/rabbitmq01.html-6d96f442.js" as="script"><link rel="prefetch" href="/assets/rabbitmq02.html-d7e85cf9.js" as="script"><link rel="prefetch" href="/assets/schedule_master001.html-4e11cba4.js" as="script"><link rel="prefetch" href="/assets/sharding_sphere_proxy001.html-3469aa09.js" as="script"><link rel="prefetch" href="/assets/tuning001.html-61d6ef57.js" as="script"><link rel="prefetch" href="/assets/tuning002.html-6628017a.js" as="script"><link rel="prefetch" href="/assets/tuning003.html-a5dde2f7.js" as="script"><link rel="prefetch" href="/assets/tuning004.html-054bc685.js" as="script"><link rel="prefetch" href="/assets/tuning005.html-f5259f7c.js" as="script"><link rel="prefetch" href="/assets/index.html-89e48f33.js" as="script"><link rel="prefetch" href="/assets/index.html-33fe1ab6.js" as="script"><link rel="prefetch" href="/assets/mongodb001.html-fc05ec9d.js" as="script"><link rel="prefetch" href="/assets/redis001.html-235bdc89.js" as="script"><link rel="prefetch" href="/assets/01mysql_info.html-a6b66b2f.js" as="script"><link rel="prefetch" href="/assets/02mysql_info.html-068822cb.js" as="script"><link rel="prefetch" href="/assets/03mysql_innoDB.html-506d1653.js" as="script"><link rel="prefetch" href="/assets/04mysql_info.html-790a1718.js" as="script"><link rel="prefetch" href="/assets/05InnoDB_lock.html-223ae1b5.js" as="script"><link rel="prefetch" href="/assets/06mysql_info.html-4b2d3f6a.js" as="script"><link rel="prefetch" href="/assets/07mysql_info.html-50ae10d4.js" as="script"><link rel="prefetch" href="/assets/08mysql_info.html-7601e865.js" as="script"><link rel="prefetch" href="/assets/09mysql_centos.html-43a9f4a0.js" as="script"><link rel="prefetch" href="/assets/10mysql_write_read.html-84b83419.js" as="script"><link rel="prefetch" href="/assets/index.html-106989a1.js" as="script"><link rel="prefetch" href="/assets/cdn001.html-1eda9371.js" as="script"><link rel="prefetch" href="/assets/dns001.html-d38b2d4f.js" as="script"><link rel="prefetch" href="/assets/docker01.html-c099819b.js" as="script"><link rel="prefetch" href="/assets/docker02.html-2fa931a0.js" as="script"><link rel="prefetch" href="/assets/docker03.html-feb12d1f.js" as="script"><link rel="prefetch" href="/assets/docker04.html-8213c817.js" as="script"><link rel="prefetch" href="/assets/frp001.html-86b24d68.js" as="script"><link rel="prefetch" href="/assets/jenkins001.html-d0fcb613.js" as="script"><link rel="prefetch" href="/assets/centos9_001.html-e73b097e.js" as="script"><link rel="prefetch" href="/assets/index.html-7a43a8bb.js" as="script"><link rel="prefetch" href="/assets/linux001.html-a464543d.js" as="script"><link rel="prefetch" href="/assets/linux002.html-58cf1ca5.js" as="script"><link rel="prefetch" href="/assets/linux003.html-51f3f2b1.js" as="script"><link rel="prefetch" href="/assets/linux004.html-23a1a9e7.js" as="script"><link rel="prefetch" href="/assets/vpn01.html-d411bec4.js" as="script"><link rel="prefetch" href="/assets/vpn02.html-9041f95f.js" as="script"><link rel="prefetch" href="/assets/vpn03.html-10bdbaeb.js" as="script"><link rel="prefetch" href="/assets/vpn04.html-c838e0a5.js" as="script"><link rel="prefetch" href="/assets/nginx001.html-e8ab8a03.js" as="script"><link rel="prefetch" href="/assets/nginx002.html-c594a14a.js" as="script"><link rel="prefetch" href="/assets/index.html-f213c134.js" as="script"><link rel="prefetch" href="/assets/index.html-d290a688.js" as="script"><link rel="prefetch" href="/assets/index.html-32bd2362.js" as="script"><link rel="prefetch" href="/assets/index.html-aae62809.js" as="script"><link rel="prefetch" href="/assets/axure_rp_10_001.html-337bca08.js" as="script"><link rel="prefetch" href="/assets/management_0001.html-8076a85d.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-1db2663f.js" as="script"><link rel="prefetch" href="/assets/index.html-e7f831f3.js" as="script"><link rel="prefetch" href="/assets/index.html-8b52f0d9.js" as="script"><link rel="prefetch" href="/assets/index.html-4648e07d.js" as="script"><link rel="prefetch" href="/assets/lan_dao.html-8a98ac78.js" as="script"><link rel="prefetch" href="/assets/mo_fei_din_lu.html-f5dc1ae7.js" as="script"><link rel="prefetch" href="/assets/read01.html-1687e123.js" as="script"><link rel="prefetch" href="/assets/yan_pi_juen.html-64856c47.js" as="script"><link rel="prefetch" href="/assets/object_oriented_analysis.html-1470ec02.js" as="script"><link rel="prefetch" href="/assets/design001.html-2dca36d3.js" as="script"><link rel="prefetch" href="/assets/design002.html-d7f05fa3.js" as="script"><link rel="prefetch" href="/assets/design003.html-d38fa6cb.js" as="script"><link rel="prefetch" href="/assets/ea001.html-a0d6ab52.js" as="script"><link rel="prefetch" href="/assets/ai0001.html-570f8bf2.js" as="script"><link rel="prefetch" href="/assets/abp001.html-e8e8c350.js" as="script"><link rel="prefetch" href="/assets/abp002.html-8b64116a.js" as="script"><link rel="prefetch" href="/assets/abp003.html-97dcc164.js" as="script"><link rel="prefetch" href="/assets/abp004.html-61336e39.js" as="script"><link rel="prefetch" href="/assets/abp005.html-c353f637.js" as="script"><link rel="prefetch" href="/assets/abp006.html-1440855d.js" as="script"><link rel="prefetch" href="/assets/abp007.html-ab8fed2b.js" as="script"><link rel="prefetch" href="/assets/abp008.html-6d348981.js" as="script"><link rel="prefetch" href="/assets/abp009.html-49dfe559.js" as="script"><link rel="prefetch" href="/assets/abp010.html-9c827b9c.js" as="script"><link rel="prefetch" href="/assets/abp011.html-3fb5d44f.js" as="script"><link rel="prefetch" href="/assets/abp012.html-97019b82.js" as="script"><link rel="prefetch" href="/assets/abp013.html-70d09ec2.js" as="script"><link rel="prefetch" href="/assets/abp014.html-df3b5c55.js" as="script"><link rel="prefetch" href="/assets/abp015.html-68bba06f.js" as="script"><link rel="prefetch" href="/assets/abp016.html-301af947.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0001.html-fb866520.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0002.html-aac60f40.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0003.html-72bb2608.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0004.html-0aa290ee.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0005.html-84e05aa9.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0006.html-4fda8e55.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0007.html-69b1b7dd.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0008.html-cf956168.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0010.html-87af3317.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0011.html-3da615b7.js" as="script"><link rel="prefetch" href="/assets/abpmicroservices0012.html-e913010d.js" as="script"><link rel="prefetch" href="/assets/index.html-318c85d6.js" as="script"><link rel="prefetch" href="/assets/csharp01.html-2c14b5d2.js" as="script"><link rel="prefetch" href="/assets/dotnet01.html-01750e0b.js" as="script"><link rel="prefetch" href="/assets/dotnet02.html-8c224ecf.js" as="script"><link rel="prefetch" href="/assets/index.html-1916077d.js" as="script"><link rel="prefetch" href="/assets/socket001.html-ba30a642.js" as="script"><link rel="prefetch" href="/assets/elasticsearch001.html-7430deaa.js" as="script"><link rel="prefetch" href="/assets/elasticsearch002.html-c4327d81.js" as="script"><link rel="prefetch" href="/assets/kafka01.html-d0597fdb.js" as="script"><link rel="prefetch" href="/assets/minio001.html-e4e18988.js" as="script"><link rel="prefetch" href="/assets/rabbitmq01.html-94778e50.js" as="script"><link rel="prefetch" href="/assets/rabbitmq02.html-5d7ed981.js" as="script"><link rel="prefetch" href="/assets/schedule_master001.html-db33de28.js" as="script"><link rel="prefetch" href="/assets/sharding_sphere_proxy001.html-e178b1f2.js" as="script"><link rel="prefetch" href="/assets/tuning001.html-81ee10f0.js" as="script"><link rel="prefetch" href="/assets/tuning002.html-3915c089.js" as="script"><link rel="prefetch" href="/assets/tuning003.html-d28fbc5d.js" as="script"><link rel="prefetch" href="/assets/tuning004.html-45498f86.js" as="script"><link rel="prefetch" href="/assets/tuning005.html-53075a0a.js" as="script"><link rel="prefetch" href="/assets/index.html-83472dc7.js" as="script"><link rel="prefetch" href="/assets/index.html-2e07e830.js" as="script"><link rel="prefetch" href="/assets/mongodb001.html-ac44abd4.js" as="script"><link rel="prefetch" href="/assets/redis001.html-81baf7e4.js" as="script"><link rel="prefetch" href="/assets/01mysql_info.html-d7f1867f.js" as="script"><link rel="prefetch" href="/assets/02mysql_info.html-8fc8d63a.js" as="script"><link rel="prefetch" href="/assets/03mysql_innoDB.html-9c9af126.js" as="script"><link rel="prefetch" href="/assets/04mysql_info.html-4b3160ce.js" as="script"><link rel="prefetch" href="/assets/05InnoDB_lock.html-205ddc38.js" as="script"><link rel="prefetch" href="/assets/06mysql_info.html-76bb44c4.js" as="script"><link rel="prefetch" href="/assets/07mysql_info.html-e1071d89.js" as="script"><link rel="prefetch" href="/assets/08mysql_info.html-c24d3548.js" as="script"><link rel="prefetch" href="/assets/09mysql_centos.html-4826990b.js" as="script"><link rel="prefetch" href="/assets/10mysql_write_read.html-f8502a25.js" as="script"><link rel="prefetch" href="/assets/index.html-341ba3fa.js" as="script"><link rel="prefetch" href="/assets/cdn001.html-1e454cb6.js" as="script"><link rel="prefetch" href="/assets/dns001.html-2add38d8.js" as="script"><link rel="prefetch" href="/assets/docker01.html-748273dd.js" as="script"><link rel="prefetch" href="/assets/docker02.html-d1864030.js" as="script"><link rel="prefetch" href="/assets/docker03.html-b13fc535.js" as="script"><link rel="prefetch" href="/assets/docker04.html-4a38e8b5.js" as="script"><link rel="prefetch" href="/assets/frp001.html-92c57efc.js" as="script"><link rel="prefetch" href="/assets/jenkins001.html-c62bbaa1.js" as="script"><link rel="prefetch" href="/assets/centos9_001.html-186fb4f5.js" as="script"><link rel="prefetch" href="/assets/index.html-aed31d7b.js" as="script"><link rel="prefetch" href="/assets/linux001.html-99ea1dd0.js" as="script"><link rel="prefetch" href="/assets/linux002.html-2fbd42df.js" as="script"><link rel="prefetch" href="/assets/linux003.html-3c59ddc1.js" as="script"><link rel="prefetch" href="/assets/linux004.html-b7f6db9b.js" as="script"><link rel="prefetch" href="/assets/vpn01.html-42016abb.js" as="script"><link rel="prefetch" href="/assets/vpn02.html-2ae1a7b1.js" as="script"><link rel="prefetch" href="/assets/vpn03.html-66ddcbf5.js" as="script"><link rel="prefetch" href="/assets/vpn04.html-022cbbf6.js" as="script"><link rel="prefetch" href="/assets/nginx001.html-5dfd0aa1.js" as="script"><link rel="prefetch" href="/assets/nginx002.html-23a7ed3a.js" as="script"><link rel="prefetch" href="/assets/index.html-b3e0fb83.js" as="script"><link rel="prefetch" href="/assets/index.html-1142373e.js" as="script"><link rel="prefetch" href="/assets/index.html-06a86388.js" as="script"><link rel="prefetch" href="/assets/index.html-5ce4eeab.js" as="script"><link rel="prefetch" href="/assets/axure_rp_10_001.html-e60bbb12.js" as="script"><link rel="prefetch" href="/assets/management_0001.html-c805580e.js" as="script"><link rel="prefetch" href="/assets/404.html-e3ed7bad.js" as="script"><link rel="prefetch" href="/assets/index-e32a7948.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-f21db64e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/images/home_logo_v.png" alt="Kenyon Li 随笔 "><span class="site-name can-hide">Kenyon Li 随笔 </span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="生活"><span class="title">生活</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="生活"><span class="title">生活</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/life/index.md" class="router-link-active" aria-label="生活之旅"><!--[--><!--]--> 生活之旅 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="技术"><span class="title">技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="技术"><span class="title">技术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/front_end/vue/index.md" class="router-link-active" aria-label="前端设计与技术"><!--[--><!--]--> 前端设计与技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/back_end/csharp/csharp01.md" class="router-link-active" aria-label="后端设计与技术"><!--[--><!--]--> 后端设计与技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/database_design_analysis/mysql/01mysql_info.md" class="router-link-active" aria-label="数据库设计与技术"><!--[--><!--]--> 数据库设计与技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/architecture_design_analysis/enterprise_architect/ea001.md" class="router-link-active" aria-label="架构设计与分析"><!--[--><!--]--> 架构设计与分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/deployment_operations/docker/docker01.md" class="router-link-active" aria-label="部署与运维技术"><!--[--><!--]--> 部署与运维技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/product_design_analysis/axure_rp_10_001.md" class="router-link-active" aria-label="产品设计与分析"><!--[--><!--]--> 产品设计与分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/code_management/git/index.md" class="router-link-active" aria-label="代码管理"><!--[--><!--]--> 代码管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/artificial_intelligence/ai/ai0001.md" class="router-link-active" aria-label="人工智能"><!--[--><!--]--> 人工智能 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/project_management/project_management_0001.md" class="router-link-active" aria-label="项目管理"><!--[--><!--]--> 项目管理 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="阅读"><span class="title">阅读</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="阅读"><span class="title">阅读</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/read/social_interaction/yan_pi_juen.md" class="router-link-active" aria-label="羊皮卷"><!--[--><!--]--> 羊皮卷 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/read/social_interaction/lan_dao.md" class="router-link-active" aria-label="狼道"><!--[--><!--]--> 狼道 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/read/social_interaction/mo_fei_din_lu.md" class="router-link-active" aria-label="墨菲定律"><!--[--><!--]--> 墨菲定律 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/read/social_interaction/read01.md" class="router-link-active" aria-label="什么反刍思维"><!--[--><!--]--> 什么反刍思维 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/read/technology/object_oriented_analysis.md" class="router-link-active" aria-label="面向对象分析与设计"><!--[--><!--]--> 面向对象分析与设计 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="收藏"><span class="title">收藏</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="收藏"><span class="title">收藏</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/collect/index.md" class="router-link-active" aria-label="浏览器书签"><!--[--><!--]--> 浏览器书签 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="生活"><span class="title">生活</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="生活"><span class="title">生活</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/life/index.md" class="router-link-active" aria-label="生活之旅"><!--[--><!--]--> 生活之旅 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="技术"><span class="title">技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="技术"><span class="title">技术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/technology/front_end/vue/index.md" class="router-link-active" aria-label="前端设计与技术"><!--[--><!--]--> 前端设计与技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/back_end/csharp/csharp01.md" class="router-link-active" aria-label="后端设计与技术"><!--[--><!--]--> 后端设计与技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/database_design_analysis/mysql/01mysql_info.md" class="router-link-active" aria-label="数据库设计与技术"><!--[--><!--]--> 数据库设计与技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/architecture_design_analysis/enterprise_architect/ea001.md" class="router-link-active" aria-label="架构设计与分析"><!--[--><!--]--> 架构设计与分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/deployment_operations/docker/docker01.md" class="router-link-active" aria-label="部署与运维技术"><!--[--><!--]--> 部署与运维技术 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/product_design_analysis/axure_rp_10_001.md" class="router-link-active" aria-label="产品设计与分析"><!--[--><!--]--> 产品设计与分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/code_management/git/index.md" class="router-link-active" aria-label="代码管理"><!--[--><!--]--> 代码管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/artificial_intelligence/ai/ai0001.md" class="router-link-active" aria-label="人工智能"><!--[--><!--]--> 人工智能 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/technology/project_management/project_management_0001.md" class="router-link-active" aria-label="项目管理"><!--[--><!--]--> 项目管理 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="阅读"><span class="title">阅读</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="阅读"><span class="title">阅读</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/read/social_interaction/yan_pi_juen.md" class="router-link-active" aria-label="羊皮卷"><!--[--><!--]--> 羊皮卷 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/read/social_interaction/lan_dao.md" class="router-link-active" aria-label="狼道"><!--[--><!--]--> 狼道 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/read/social_interaction/mo_fei_din_lu.md" class="router-link-active" aria-label="墨菲定律"><!--[--><!--]--> 墨菲定律 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/read/social_interaction/read01.md" class="router-link-active" aria-label="什么反刍思维"><!--[--><!--]--> 什么反刍思维 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/read/technology/object_oriented_analysis.md" class="router-link-active" aria-label="面向对象分析与设计"><!--[--><!--]--> 面向对象分析与设计 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="收藏"><span class="title">收藏</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="收藏"><span class="title">收藏</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/collect/index.md" class="router-link-active" aria-label="浏览器书签"><!--[--><!--]--> 浏览器书签 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">前端设计与技术 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">javasrcipt <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/front_end/javascript/index.md" class="sidebar-item" aria-label="js语法基础"><!--[--><!--]--> js语法基础 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">H5语法 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/front_end/h5/index.md" class="sidebar-item" aria-label="H5语法基础"><!--[--><!--]--> H5语法基础 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">CSS样式 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/front_end/css/index.md" class="sidebar-item" aria-label="CSS语法基础"><!--[--><!--]--> CSS语法基础 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Vue语法 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/front_end/vue/index.md" class="sidebar-item" aria-label="vue语法基础"><!--[--><!--]--> vue语法基础 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">后端设计与技术 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">C#语法特性 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/csharp/csharp01.md" class="sidebar-item" aria-label="C#语法特性"><!--[--><!--]--> C#语法特性 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">C/C++ <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/cppreference/index.md" class="sidebar-item" aria-label="c/c++"><!--[--><!--]--> c/c++ <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">dotnet Core <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/dotnetcore/dotnet01.md" class="sidebar-item" aria-label="dotnet 安装 CLI/SDK"><!--[--><!--]--> dotnet 安装 CLI/SDK <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/dotnetcore/index.md" class="sidebar-item" aria-label="EFCore数据库迁移命令"><!--[--><!--]--> EFCore数据库迁移命令 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/dotnetcore/socket001.md" class="sidebar-item" aria-label="Socket网络编程"><!--[--><!--]--> Socket网络编程 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/dotnetcore/dotnet02.md" class="sidebar-item" aria-label="Net 后台代码模拟浏览器请求 Get、Post、Put的扩展方法"><!--[--><!--]--> Net 后台代码模拟浏览器请求 Get、Post、Put的扩展方法 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">ABP vNnext <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/abp/abp001.md" class="sidebar-item" aria-label="ABP CLI"><!--[--><!--]--> ABP CLI <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp002.md" class="sidebar-item" aria-label="ABP vNnext  核心根基模块化"><!--[--><!--]--> ABP vNnext  核心根基模块化 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp003.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(一)-落地实战"><!--[--><!--]--> ABP核心项目-电商项目(一)-落地实战 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp004.md" class="sidebar-item" aria-label="ABP核心项目-电商项目落地实战(二)-领域层优化"><!--[--><!--]--> ABP核心项目-电商项目落地实战(二)-领域层优化 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp005.md" class="sidebar-item" aria-label="ABP核心项目-电商项目落地实战(三)-仓储、服务层优化"><!--[--><!--]--> ABP核心项目-电商项目落地实战(三)-仓储、服务层优化 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp006.md" class="sidebar-item" aria-label="ABP核心项目-电商项目落地实战(四)-应用、web层优化、原理"><!--[--><!--]--> ABP核心项目-电商项目落地实战(四)-应用、web层优化、原理 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp007.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(五)-动态c#API客户端模块"><!--[--><!--]--> ABP核心项目-电商项目(五)-动态c#API客户端模块 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp008.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(六)-用户组件-用户身份模块"><!--[--><!--]--> ABP核心项目-电商项目(六)-用户组件-用户身份模块 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp009.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(七)-用户组件-账户模块"><!--[--><!--]--> ABP核心项目-电商项目(七)-用户组件-账户模块 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp010.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(八)-用户组件-权限模块"><!--[--><!--]--> ABP核心项目-电商项目(八)-用户组件-权限模块 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp011.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(九)-用户组件-多租户模块"><!--[--><!--]--> ABP核心项目-电商项目(九)-用户组件-多租户模块 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp012.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(十)-疑问记录"><!--[--><!--]--> ABP核心项目-电商项目(十)-疑问记录 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp013.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(十一)-设置模块"><!--[--><!--]--> ABP核心项目-电商项目(十一)-设置模块 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp014.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(十二)-特征模块"><!--[--><!--]--> ABP核心项目-电商项目(十二)-特征模块 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp015.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(十三)-异常/认证/本地化模块"><!--[--><!--]--> ABP核心项目-电商项目(十三)-异常/认证/本地化模块 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abp/abp016.md" class="sidebar-item" aria-label="ABP核心项目-电商项目(十四)-虚拟文件系统"><!--[--><!--]--> ABP核心项目-电商项目(十四)-虚拟文件系统 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item active collapsible">Apb微服务项目 <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0001.md" class="sidebar-item" aria-label="微服务电商项目落地"><!--[--><!--]--> 微服务电商项目落地 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0002.md" class="sidebar-item" aria-label="微服务通信"><!--[--><!--]--> 微服务通信 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0003.md" class="sidebar-item" aria-label="微服务网关-Ocelot"><!--[--><!--]--> 微服务网关-Ocelot <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0004.md" class="sidebar-item" aria-label="微服务注册中心-Consul"><!--[--><!--]--> 微服务注册中心-Consul <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0005.md" class="sidebar-item" aria-label="微服务注配置中心-Nacos"><!--[--><!--]--> 微服务注配置中心-Nacos <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0006.md" class="sidebar-item" aria-label="微服务事件总线-CAP"><!--[--><!--]--> 微服务事件总线-CAP <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0007.md" class="sidebar-item" aria-label="微服务链路监控-skywalking"><!--[--><!--]--> 微服务链路监控-skywalking <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0008.md" class="sidebar-item" aria-label="微服务日志中心"><!--[--><!--]--> 微服务日志中心 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0009.md" class="sidebar-item active" aria-label="微服务分布式事务"><!--[--><!--]--> 微服务分布式事务 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0010.md" class="sidebar-item" aria-label="微服务分布式权限"><!--[--><!--]--> 微服务分布式权限 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0011.md" class="sidebar-item" aria-label="微服务分布式文件系统、分布式缓存、分布式锁"><!--[--><!--]--> 微服务分布式文件系统、分布式缓存、分布式锁 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/abpmicroservices/abpmicroservices0012.md" class="sidebar-item" aria-label="微服务大数据库MongoDB、任务调度Hangfire"><!--[--><!--]--> 微服务大数据库MongoDB、任务调度Hangfire <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">分布式消息中间件-RabbitMQ <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/rabbitmq/rabbitmq01.md" class="sidebar-item" aria-label="RabbitMQ简介（一）"><!--[--><!--]--> RabbitMQ简介（一） <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/rabbitmq/rabbitmq02.md" class="sidebar-item" aria-label="RabbitMQ（二）"><!--[--><!--]--> RabbitMQ（二） <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">分布式消息中间件-Kafka <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/kafka/kafka01.md" class="sidebar-item" aria-label="Kafka介绍（一）"><!--[--><!--]--> Kafka介绍（一） <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">分布式中间件-ShardingSphere-Proxy <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/sharding_sphere_proxy/sharding_sphere_proxy001.md" class="sidebar-item" aria-label="分布式中间件-ShardingSphere-Proxy"><!--[--><!--]--> 分布式中间件-ShardingSphere-Proxy <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">分布式中间件-ElasticSearch <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/elasticsearch/elasticsearch001.md" class="sidebar-item" aria-label="ElasticSearch"><!--[--><!--]--> ElasticSearch <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/elasticsearch/elasticsearch002.md" class="sidebar-item" aria-label="ElasticSearch-分词器"><!--[--><!--]--> ElasticSearch-分词器 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">分布式中间件-Minio <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/minio/minio001.md" class="sidebar-item" aria-label="Minio"><!--[--><!--]--> Minio <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">分布式任务调度中间件-ScheduleMaster <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/schedule_master/schedule_master001.md" class="sidebar-item" aria-label="分布式任务调度中间件-ScheduleMaster"><!--[--><!--]--> 分布式任务调度中间件-ScheduleMaster <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">性能调优 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/back_end/tuning/tuning001.md" class="sidebar-item" aria-label="DNS调优"><!--[--><!--]--> DNS调优 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/tuning/tuning002.md" class="sidebar-item" aria-label="CDN调优"><!--[--><!--]--> CDN调优 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/tuning/tuning003.md" class="sidebar-item" aria-label="Nginx调优"><!--[--><!--]--> Nginx调优 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/tuning/tuning004.md" class="sidebar-item" aria-label="WebAPI调优"><!--[--><!--]--> WebAPI调优 <!--[--><!--]--></a><!----></li><li><a href="/technology/back_end/tuning/tuning005.md" class="sidebar-item" aria-label="EFCore调优"><!--[--><!--]--> EFCore调优 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">数据库设计与技术 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">MySql数据库 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/database_design_analysis/mysql/index.md" class="sidebar-item" aria-label="Mysql8.0 Ubuntu 20.4 安装"><!--[--><!--]--> Mysql8.0 Ubuntu 20.4 安装 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/09mysql_centos.md" class="sidebar-item" aria-label="Mysql8.0 CentOS Stream 9 安装"><!--[--><!--]--> Mysql8.0 CentOS Stream 9 安装 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/10mysql_write_read.md" class="sidebar-item" aria-label="Mysql 8.0 主从部署-读写分离"><!--[--><!--]--> Mysql 8.0 主从部署-读写分离 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/01mysql_info.md" class="sidebar-item" aria-label="Mysql 架构体系详解"><!--[--><!--]--> Mysql 架构体系详解 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/02mysql_info.md" class="sidebar-item" aria-label="InnoDB架构详解、事务介绍"><!--[--><!--]--> InnoDB架构详解、事务介绍 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/03mysql_innoDB.md" class="sidebar-item" aria-label="InnoDB事务"><!--[--><!--]--> InnoDB事务 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/04mysql_info.md" class="sidebar-item" aria-label="InnoDB索引"><!--[--><!--]--> InnoDB索引 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/05InnoDB_lock.md" class="sidebar-item" aria-label="Mysql InnoDB锁"><!--[--><!--]--> Mysql InnoDB锁 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/06mysql_info.md" class="sidebar-item" aria-label="Mysql 性能优化"><!--[--><!--]--> Mysql 性能优化 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/07mysql_info.md" class="sidebar-item" aria-label="MySQL分库分表"><!--[--><!--]--> MySQL分库分表 <!--[--><!--]--></a><!----></li><li><a href="/technology/database_design_analysis/mysql/08mysql_info.md" class="sidebar-item" aria-label="MySQL集群篇"><!--[--><!--]--> MySQL集群篇 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">MongoDB数据库 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/database_design_analysis/mongodb/mongodb001.md" class="sidebar-item" aria-label="分布式中间件-MongoDB"><!--[--><!--]--> 分布式中间件-MongoDB <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Redis数据库 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/database_design_analysis/redis/redis001.md" class="sidebar-item" aria-label="分布式中间件-Redis"><!--[--><!--]--> 分布式中间件-Redis <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">架构设计与分析 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">设计模式 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/architecture_design_analysis/design/design001.md" class="sidebar-item" aria-label="工厂、抽象工厂、策略模式"><!--[--><!--]--> 工厂、抽象工厂、策略模式 <!--[--><!--]--></a><!----></li><li><a href="/technology/architecture_design_analysis/design/design002.md" class="sidebar-item" aria-label="设计模式-应用场景和优缺点"><!--[--><!--]--> 设计模式-应用场景和优缺点 <!--[--><!--]--></a><!----></li><li><a href="/technology/architecture_design_analysis/design/design003.md" class="sidebar-item" aria-label="存储高可用"><!--[--><!--]--> 存储高可用 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">EA工具 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/architecture_design_analysis/enterprise_architect/ea001.md" class="sidebar-item" aria-label="UML、类图、顺序图 "><!--[--><!--]--> UML、类图、顺序图  <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">部署与运维技术 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">linux系统 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/deployment_operations/linux/index.md" class="sidebar-item" aria-label="linux基础"><!--[--><!--]--> linux基础 <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/linux/centos9_001.md" class="sidebar-item" aria-label="linux（centos9）root密码忘记了，怎么重置或修改密码"><!--[--><!--]--> linux（centos9）root密码忘记了，怎么重置或修改密码 <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/linux/vpn01.md" class="sidebar-item" aria-label="Ubuntu20.4 搭建vpn服务器"><!--[--><!--]--> Ubuntu20.4 搭建vpn服务器 <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/linux/vpn02.md" class="sidebar-item" aria-label="Linux实现socks终端代理、全局代理"><!--[--><!--]--> Linux实现socks终端代理、全局代理 <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/linux/vpn03.md" class="sidebar-item" aria-label="搭建 vpn 使用 x-ui 部署配置"><!--[--><!--]--> 搭建 vpn 使用 x-ui 部署配置 <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/linux/linux001.md" class="sidebar-item" aria-label="yum及yum-config-manager命令详解"><!--[--><!--]--> yum及yum-config-manager命令详解 <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/linux/linux002.md" class="sidebar-item" aria-label="dnf命令详解"><!--[--><!--]--> dnf命令详解 <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/linux/linux003.md" class="sidebar-item" aria-label="linux 运行 AppImage 应用"><!--[--><!--]--> linux 运行 AppImage 应用 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Nginx工具 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/deployment_operations/nginx/nginx001.md" class="sidebar-item" aria-label="分布式中间件-Nginx"><!--[--><!--]--> 分布式中间件-Nginx <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Docker容器 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/deployment_operations/docker/docker01.md" class="sidebar-item" aria-label="微服务部署Docker"><!--[--><!--]--> 微服务部署Docker <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/docker/docker02.md" class="sidebar-item" aria-label="Docker集群"><!--[--><!--]--> Docker集群 <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/docker/docker03.md" class="sidebar-item" aria-label="微服务部署-k8s(一)"><!--[--><!--]--> 微服务部署-k8s(一) <!--[--><!--]--></a><!----></li><li><a href="/technology/deployment_operations/docker/docker04.md" class="sidebar-item" aria-label="微服务部署-k8s(二)-应用"><!--[--><!--]--> 微服务部署-k8s(二)-应用 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">jenkins工具 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/deployment_operations/jenkins/jenkins001.md" class="sidebar-item" aria-label="Jenkins 安装部署"><!--[--><!--]--> Jenkins 安装部署 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">frp 网络穿透工具 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/deployment_operations/frp/frp001.md" class="sidebar-item" aria-label="Frp网络穿透工具"><!--[--><!--]--> Frp网络穿透工具 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">产品设计与分析 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">Axure原型工具 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/product_design_analysis/axure/axure_rp_10_001.md" class="sidebar-item" aria-label="axure原型设计工具"><!--[--><!--]--> axure原型设计工具 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">代码管理 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">git工具 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/code_management/git/index.md" class="sidebar-item" aria-label="git 常用命令"><!--[--><!--]--> git 常用命令 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item collapsible">Markdown语法 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/code_management/markdown/index.md" class="sidebar-item" aria-label="Markdown使用手册"><!--[--><!--]--> Markdown使用手册 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">人工智能 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">人工智能 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/artificial_intelligence/ai/ai0001.md" class="sidebar-item" aria-label="什么是人工智能"><!--[--><!--]--> 什么是人工智能 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">项目管理 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item collapsible">工作职责 <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/technology/project_management/project/management_0001.md" class="sidebar-item" aria-label="项目管理工作职责"><!--[--><!--]--> 项目管理工作职责 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="目录" tabindex="-1"><a class="header-anchor" href="#目录" aria-hidden="true">#</a> 目录</h2><nav class="table-of-contents"><ul><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#目录" class="router-link-active router-link-exact-active">目录</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#微服务分布式事务" class="router-link-active router-link-exact-active">微服务分布式事务</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#为什么要学习分布式事务" class="router-link-active router-link-exact-active">为什么要学习分布式事务</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#什么是事务" class="router-link-active router-link-exact-active">什么是事务</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#什么是本地事务" class="router-link-active router-link-exact-active">什么是本地事务</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#什么是分布式事务" class="router-link-active router-link-exact-active">什么是分布式事务</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#分布式事务类型" class="router-link-active router-link-exact-active">分布式事务类型</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#为什么要使用分布式事务" class="router-link-active router-link-exact-active">为什么要使用分布式事务</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#分布式事务方案演化" class="router-link-active router-link-exact-active">分布式事务方案演化</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#tcc分布式事务" class="router-link-active router-link-exact-active">TCC分布式事务</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#saga分布式事务" class="router-link-active router-link-exact-active">Saga分布式事务</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#saga分布式事务框架" class="router-link-active router-link-exact-active">Saga分布式事务框架</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#微服务项目中如何使用servicecomb-pack" class="router-link-active router-link-exact-active">微服务项目中如何使用ServiceComb Pack</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#微服务项目中如何使用servicecomb-pack-1" class="router-link-active router-link-exact-active">微服务项目中如何使用ServiceComb Pack</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#servicecomb-pack-saga-集群" class="router-link-active router-link-exact-active">ServiceComb Pack(Saga)集群</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#servicecomb-pack-saga-协调器集群如何实现负载均衡" class="router-link-active router-link-exact-active">ServiceComb Pack(Saga)协调器集群如何实现负载均衡</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#servicecomb-pack-saga-注册到consul" class="router-link-active router-link-exact-active">ServiceComb Pack (saga)注册到consul</a></li><li><a aria-current="page" href="/technology/back_end/abpmicroservices/abpmicroservices0009.html#saga协调器集群如何在微服务里面进行通用封装" class="router-link-active router-link-exact-active">Saga协调器集群如何在微服务里面进行通用封装</a></li></ul></nav><h2 id="微服务分布式事务" tabindex="-1"><a class="header-anchor" href="#微服务分布式事务" aria-hidden="true">#</a> 微服务分布式事务</h2><h2 id="为什么要学习分布式事务" tabindex="-1"><a class="header-anchor" href="#为什么要学习分布式事务" aria-hidden="true">#</a> 为什么要学习分布式事务</h2><p>目的：提升分布式架构设计水平，保证数据稳定性。 有一天，你们设计的系统，小明在操作你设计的系统，这个时候，小明上传了一张林志玲，获取的时候居然是王宝强？<br> 为什么会出现这种现象，我上传什么应该就获取什么呀？怎么会出现这样的问题呢？这是数据被掉包了。<br> 但是这是数据不一致导致的，那么我们如何解决呢？<br> 我我们学会分布式事务，我们就能解决。<br> 如果你去公司面试，遇到了类似了场景，你就把握了面试的机会因此，学好分布事务是非常重要的。</p><h2 id="什么是事务" tabindex="-1"><a class="header-anchor" href="#什么是事务" aria-hidden="true">#</a> 什么是事务</h2><p>事务由一组操作的一个工作单元。怎么去理解这个问题呢？<br> 我们从现实生活中去理解<br> 那么事务有哪些特性呢？ 事务特性：<br> 1、原子性：事务内部的一组操作要么同时成功，要么同时失败<br> 2、隔离性： 不同事务之间是互相不影响的<br> 3、持久性：事务内部一组操作，各个操作产生的数据要能够持久的效应<br> 4、一致性：事务内部一组操作，各自操作产生的结果数据，要能够保证是预期的状态</p><h2 id="什么是本地事务" tabindex="-1"><a class="header-anchor" href="#什么是本地事务" aria-hidden="true">#</a> 什么是本地事务</h2><p>本地事务就是由一组sql语句操作的集合;<br> 本地事务主要就是指sql语句的操作</p><h2 id="什么是分布式事务" tabindex="-1"><a class="header-anchor" href="#什么是分布式事务" aria-hidden="true">#</a> 什么是分布式事务</h2><p>分布式事务就是一组服务操作的集合<br> 例如：在分布式系统或者微服务系统内，完成一个任何，需要涉及到多个服务来共同完成，这一组服务操作组成的集合，就是分布式事务。</p><h2 id="分布式事务类型" tabindex="-1"><a class="header-anchor" href="#分布式事务类型" aria-hidden="true">#</a> 分布式事务类型</h2><p>不同服务不同数据库<br> 都可以参进各个图<br> 不同服务相同数据库<br> 都可以参进各个图 相同服务不同数据库 都可以参进各个图</p><h2 id="为什么要使用分布式事务" tabindex="-1"><a class="header-anchor" href="#为什么要使用分布式事务" aria-hidden="true">#</a> 为什么要使用分布式事务</h2><p>我们从真实的项目场景中出发，例如我们现在学习的微服务架构，那么我们现在来研究一下为什么要使用分布式事务<br> 目前我们的项目已经集成了4个微服务架构技术，那么我们目前来看一下，他们之间的调用逻辑<br> 现在有这样一个需求，我想通过在订单聚合微服务添加订单和商品 如果在添加订单和商品，如果添加订单信息成功了，商品失败了，那么这个时候，就会出现订单添加成功，而商品信息就没有添加成功，是吧，那么，这个问题该如何解决呢？<br> 很多同学，想到了解决方案，就是今天讲的分布式事务。<br> 那么分布式事务是如何解决的呢？<br> 目前方案有很多，目前事务分类为两类：一种是刚性事务，一种是柔性事务</p><p><strong>刚性事务</strong><br> 就是完全遵守事务4大特性的分布式事务——主要体现在一致性（强一致性）<br> cap理论 2阶段提交<br> 3阶段提交</p><p><strong>柔性事务</strong> 就是不完全遵守事务4特性的分布式事务——主要体现在一致性（不完全一直，最终一致性）<br> Base理论<br> 特性<br> 可查询操作：服务操作具有全局唯一标识，操作唯一确定的时间<br> 幂等操作：重复调用多次产生的业务结果与调用一次产生的结果相同，一是通过型业务操作实现幂等性，二是系统缓存所有请求与处理结果，最后是检测到重复请求之后，自动返回之前的处理结果。</p><p>同步事务（http,rpc）</p><p>Tcc分布式事务</p><p>Saga公布式事务</p><p>异步事务（消息队列MQ）</p><p>本地消息表</p><h2 id="分布式事务方案演化" tabindex="-1"><a class="header-anchor" href="#分布式事务方案演化" aria-hidden="true">#</a> 分布式事务方案演化</h2><p>2阶段提交<br> 1、准备阶段 prepare 2、提交阶段 commit 优点<br> 保证了数据的强一致性，适合对数据强一致性要求很高的关键领域<br> 缺点<br> 1、同步阻塞 性能问题<br> 2、数据一致性问题<br> 3、单点故障<br> 场景<br> 同服务不同数据库</p><p>3阶段提交<br> 1、确认阶段 canCommit 2、准备阶段 PreCommit<br> 3、提交阶段 do commit</p><p>优点<br> 避免了单点问题，避免了阻塞问题<br> 缺点<br> 1、状态不一致<br> 同服务不同数据库<br> 场景<br> 同服务不同数据库</p><h2 id="tcc分布式事务" tabindex="-1"><a class="header-anchor" href="#tcc分布式事务" aria-hidden="true">#</a> TCC分布式事务</h2><p>优点<br> 1、解决了跨服务的业务操作原子性能问题，例如组合支付，订单减库等场景非常实用<br> 2、TCC的本质原理是把数据库的二阶段提交上升到微服务来实现，从而避免了数据库2阶段中锁冲突的长事务低性能风险。<br> 3、TCC异步高性能，它采用了try先检查，然后异步实现confirm,真正提交的是在confirm方法中。<br> 缺点<br> 1、对微服务的入侵性强，微服务的每个事务都必须实现try,confirm,cance等3个方法，开发成本高，今后维护改造成本高。<br> 2、为了达到事务的一致性要求，try,confrim,cance接口必须实现等幂性操作。（定时器+ 重试）<br> 3、由于事务管理要记录日志，必定会损耗一定的性能，并使得整个TCC事务时间拉长，建议采用redis的方式来记录事务日志。<br> 场景：微服务</p><h2 id="saga分布式事务" tabindex="-1"><a class="header-anchor" href="#saga分布式事务" aria-hidden="true">#</a> Saga分布式事务</h2><p>优点<br> 1、避免服务之间服务循环依赖，因为saga协调器会调用saga参与者，但参与者不会调用协调器<br> 2、集中分布式事务编排<br> 3、降低参考者的复杂性<br> 4、回滚更容易管理</p><p>saga模式的一大优势是它支持长事务。因为每个微服务仅关注其自己的本地原子事务，所以如果微服务运行很长时间，则不会阻止其他微服务。这也允许事务断续等待用户输入。此处，由于所有本地事务者是并行发生的，因此任何对象都没有锁定。</p><p>缺点</p><p>协调器集中太多逻辑的风险<br> Saga模式很难调试，特别是涉及许多微服务时，此外，如果系统变得复杂，事件消息可能变得难以维护。Saga模式的另一个缺点是它没有读取隔离，例如，客户可以看到正在创建的订单，但在下一秒，订单将因补偿交易被删除。<br> 场景：微服务</p><h2 id="saga分布式事务框架" tabindex="-1"><a class="header-anchor" href="#saga分布式事务框架" aria-hidden="true">#</a> Saga分布式事务框架</h2><p>主要用在微服务<br> 1、Eventuate-Tram-Saga JDBC/JPA 的java微服务的Saga框架<br> 目前C# net 没有支持的客户端，不好使用</p><p>2、ServiceComb Pack<br> 是华为开源的一个微服务架构后进入Apache软件基金会孵化，Servicecomb是华为开源的一个微服务事务框架，后进入Apache软件基金会孵化，现已毕业，是apache顶级开源项目，而servicecomb-pack是servicecomb孵化三个子项目之一，是分布式事务最终一致性解决方案，0.3.0版本之前叫saga,现改名为servicecomb-pack,支持saga和tcc两种分布式事务协议，相关理论知识请稳步（传送门），本文请要介绍saga模式。</p><h2 id="微服务项目中如何使用servicecomb-pack" tabindex="-1"><a class="header-anchor" href="#微服务项目中如何使用servicecomb-pack" aria-hidden="true">#</a> 微服务项目中如何使用ServiceComb Pack</h2><p>特性<br> 高可用：支持高可用的集群模式部署<br> 高可靠：所有的关键事务事件都持久存储在数据库中。 高性能：事务事件是通过高性能gRPC来上报的，且事务的请求和响应消息都是通过Kyro进行序列化和反序列化。<br> 低侵入：仅需2-3个注解和编写对应的补偿方法即可引入分布式事务。 部署简单：支持通过容器（Docker）进行快速部署和交付。<br> 补偿机制灵活：支持前向恢复（重试）及后向恢复（补偿）功能。<br> 扩展简单：基于Pack架构很容易实现多种协调协议，目前支持Tcc,Saga协议，未来还可以添加其他协议支持。</p><p><strong>内部概念</strong><br> ServiceComb Pack架构是由alpha 和 omega 组成，其中：</p><ul><li>alpha充当协调者的角色，主要负责对事务进行管理和协调。</li><li>omega是微服务中内嵌的一个agent,负责对调用请求进行拦截并向alpha上报事务事件。</li></ul><p>微服务项目和ServiceCom</p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0001image.png" alt="Alt text"></p><h2 id="微服务项目中如何使用servicecomb-pack-1" tabindex="-1"><a class="header-anchor" href="#微服务项目中如何使用servicecomb-pack-1" aria-hidden="true">#</a> 微服务项目中如何使用ServiceComb Pack</h2><p>条件</p><p>1、微服务项目</p><p>2、ServiceComb Pack saga事务框架alpha，协调器</p><p>3、servicecomb-pack-csharp-omega_v0.1，saga事务框架客户端omega，客户端</p><p>4、mysql或者PostgreSQL</p><p>步骤<br> 1、微服务项目操作</p><p>​ 1.1 启动微服务项目，正确响应出结果</p><p>2、alpha操作</p><p>​ 2.1 环境准备</p><p>​ jdk1.8 下载地址http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</p><p>​ PostgreSQL下载地址：https://www.enterprisedb.com/downloads/postgres-postgresql-downloads。</p><p>​ Mysql下载地址：https://dev.mysql.com/downloads/mysql/</p><p>​ ServiceComb Pack 下载地址：http://servicecomb.apache.org/release/pack-downloads/</p><p>​ Mysql和PostgreSQL二者选一，默认是PostgreSQL</p><p>​ 2.2 ServiceComb Pack 启动 (连接mysql为例)</p><p>​ 2.2.1 PostgreSQL下启动ServiceComb Pack<br> ​ 切换到什么目录 D:\alpha\apache-servicecomb-pack-distribution-0.5.0-bin 先创建数据库 <code>saga</code> 在执行指令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=prd&quot;</span> -D<span class="token string">&quot;spring.datasource.url=jdbc:postgresql://localhost:5432/saga?useSSL=false&quot;</span> -D<span class="token string">&quot;spring.datasource.username=root&quot;</span> -D<span class="token string">&quot;spring.datasource.password=root&quot;</span> <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2.2.2 mysql配置</p><p>​ 1、在apache-servicecomb-pack-distribution-0.5.0-bin目录下创建插件目录</p><p>​ plugins文件夹</p><p>​ 2、 在plugins文件夹内部添加mysql驱动</p><p>​ <a href="/file/mysql/mysql-connector-java-8.0.15.jar">mysql-connector-java-8.0.15.jar</a></p><p>​ 3、mysql下启动ServiceComb Pack</p><p>​ 切换到什么目录 D:\alpha\apache-servicecomb-pack-distribution-0.5.0-bin</p><p>先创建数据库 <code>saga</code> 在执行指令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>进入apache-servicecomb-pack-distribution-0.5.0-bin目录
打开application.yml文件
添加spring.datasource.url
添加spring.datasource.username
添加spring.datasource.password
使用cmd,输入命令
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar

或者不修改配置application.yml文件，直接启动
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;spring.datasource.url=jdbc:mysql://localhost:3306/saga?useSSL=false&amp;serverTimezone=Asia/Shanghai&quot;</span> -D<span class="token string">&quot;spring.datasource.username=root&quot;</span> -D<span class="token string">&quot;spring.datasource.password=root&quot;</span> <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4、查询mysql saga数据库</p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0002image.png" alt="Alt text"></p><p>​ txexvent- 事件表详情</p><p>​ txtimeout-超时表详情</p><p>​ compenste-补偿表详情</p><p>3、omega操作</p><p>​ 3.1 环境准备</p><p>​ servicecomb-pack-csharp-omega_v0.1 下载地址：https://github.com/OpenSagas-csharp/servicecomb-pack-csharp#servicecomb-pack-csharp</p><p>​ 3.2 omega配置</p><p>​ 1、在LKN.MicroService下面创建解决方案文件夹</p><p>​ omega文件夹</p><p>​ 2、在omega文件下面从导入项目</p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0003image.png" alt="Alt text"></p><p>3、在LKN.OrderDetailsServices,LKN.OrderService,LKN.ProductService下分别引入</p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0004image.png" alt="Alt text"></p><p>4、在LKN.OrderDetailsServices,LKN.OrderService,LKN.ProductService中从Servicecomb.Saga.Omega.Core中复制AssemblyInfo.cs 到根目录下</p><p>​ <code>AssemblyInfo.cs </code></p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0005image.png" alt="Alt text"></p><p>​ 5、在LKN.OrderDetailsServices,LKN.OrderService,LKN.ProductService项目startup.cs引入</p><p>引入MethodDecorator.Fody程序集 编译时植入</p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0006image.png" alt="Alt text"></p><div class="language-c# line-numbers-mode" data-ext="c#"><pre class="language-c#"><code> public void ConfigureServices(IServiceCollection services)
        {
            // 7、注册saga分布式事务
            services.AddOmegaCore(option =&gt;
            {
                option.GrpcServerAddress = &quot;localhost:8080&quot;; // 1、协调中心地址
                option.InstanceId = &quot;AggregateService-1&quot;;// 2、服务实例Id
                option.ServiceName = &quot;AggregateService&quot;;// 3、服务名称
            });
        }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 6、在LKN.OrderDetailsServices项目OrderDetailsController.cs文件中添加<code>SagaStart</code></p><div class="language-c# line-numbers-mode" data-ext="c#"><pre class="language-c#"><code>
        /// &lt;summary&gt;
        /// 创建订单
        /// &lt;/summary&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        // [HttpPost(&quot;CreateOrder&quot;), SagaStart]
        [HttpPost(&quot;CreateOrder&quot;), SagaStart(TimeOut=3)] // 开启分布式事务 
        public OrderDto CreateOrder(CreateOrderDto createOrderDto)
        {
            // 1、创建订单
            createOrderDto.Id = Guid.NewGuid();
            OrderDto orderDto = _OrderAppService.CreateAsync(createOrderDto).Result;

            // 2、扣减库存
            string guid = &quot;3a0dbecd-d8bc-b847-4c93-82f82bc0d608&quot;;
            UpdateProductDto updateProductDto = new UpdateProductDto();
            updateProductDto.ProductStock = 2;
            updateProductDto.Id = Guid.Parse(guid);
            var productDto = _ProductAppService.UpdateAsync(updateProductDto.Id, updateProductDto).Result;

            // 3、执行失败
            // throw new Exception(&quot;执行异常&quot;);
            return orderDto;
        }

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 7、在OrdersService项目中LKN.Order.HttpApi.cs文件下添加</p><p>​ 引入MethodDecorator.Fody 编译时植入<br> ​添加 <code>AssemblyInfo.cs </code></p><div class="language-c# line-numbers-mode" data-ext="c#"><pre class="language-c#"><code> /// &lt;summary&gt;
    /// 1、删除订单方法
    /// 抛出了，会进行重复的执行，直到成功，使用的是幂等机制
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;input&quot;&gt;&lt;/param&gt;
    void DeleteOrder(CreateOrderDto input)
    {
        _logger.LogInformation(&quot;删除订单&quot;);
        //throw new Exception(&quot;21221&quot;);
        //使用数据库本地事务
        // UnitofWork
        // cap是异步请求，同步
        _OrderAppService.DeleteAsync(input.Id).Wait();
    }

    /// &lt;summary&gt;
    /// 异步创建订单
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;input&quot;&gt;&lt;/param&gt;
    /// &lt;returns&gt;&lt;/returns&gt;
    [NonAction]
    public async Task&lt;OrderDto&gt; CreateOrder(CreateOrderDto input)
    {
        Console.WriteLine(&quot;异步创建订单&quot;);
        return await _OrderAppService.CreateAsync(input);
    }

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 8、在ProductService项目中LKN.Product.HttpApi.cs文件下添加</p><p>​ 引入MethodDecorator.Fody 编译时植入 ​添加 <code>AssemblyInfo.cs </code></p><div class="language-c# line-numbers-mode" data-ext="c#"><pre class="language-c#"><code>/// &lt;summary&gt;
        /// 更新方法接受
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;input&quot;&gt;&lt;/param&gt;
        /// &lt;returns&gt;&lt;/returns&gt;
        [HttpPut, Compensable(nameof(RecoverStock))]
        public async Task&lt;ProductDto&gt; UpdateAsync(Guid id, UpdateProductDto input)
        {
            return await _ProductAppService.UpdateAsync(id, input);
        }
        /// &lt;summary&gt;
        /// 恢复库存
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;id&quot;&gt;&lt;/param&gt;
        /// &lt;param name=&quot;input&quot;&gt;&lt;/param&gt;
        void RecoverStock(UpdateProductDto input)
        {
            Console.WriteLine(&quot;恢复商品库存&quot;);
            input.ProductStock = 10;
            _ProductAppService.UpdateAsync(input.Id, input).Wait();
        }

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>正常情况</strong></p><p>全部执行成功的情况下面</p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0007image.png" alt="Alt text"></p><p><strong>异常情况</strong></p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0008image.png" alt="Alt text"></p><p>异常时Command表会记录请求信息，便于补偿重试。</p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0009image.png" alt="Alt text"></p><h2 id="servicecomb-pack-saga-集群" tabindex="-1"><a class="header-anchor" href="#servicecomb-pack-saga-集群" aria-hidden="true">#</a> ServiceComb Pack(Saga)集群</h2><p>步骤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">1</span>、先启动一个master节点

<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span>  <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar

<span class="token number">2</span>、然后进入application.yaml

修改alpha.server.port

修改server.port

<span class="token number">3</span>、然后启动slaver节点

<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span> <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>1、ServiceComb Pack (Saga)实例1</p><p>切换到什么目录 D:\apache-servicecomb-pack-distribution-0.5.0-bin 使用cmd</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>然后进入application.yaml
修改alpha.server.port<span class="token operator">=</span><span class="token number">8080</span>
修改server.port<span class="token operator">=</span><span class="token number">8090</span>
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span>  <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar

或者不修改application.yaml配置文件直接启动
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;spring.datasource.url=jdbc:mysql://localhost:3306/saga?useSSL=false&amp;serverTimezone=Asia/Shanghai&quot;</span> -D<span class="token string">&quot;spring.datasource.username=root&quot;</span> -D<span class="token string">&quot;spring.datasource.password=root&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span>  -D<span class="token string">&quot;alpha.server.port=8081&quot;</span> -D<span class="token string">&quot;server.port=8091&quot;</span>  <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、ServiceComb Pack(Saga) 实例2</p><p>切换到什么目录 D:\apache-servicecomb-pack-distribution-0.5.0-bin 使用cmd</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>然后进入application.yaml
修改alpha.server.port<span class="token operator">=</span><span class="token number">8081</span>
修改server.port<span class="token operator">=</span><span class="token number">8091</span>
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span>  <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar

或者不修改application.yaml配置文件直接启动
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;spring.datasource.url=jdbc:mysql://localhost:3306/saga?useSSL=false&amp;serverTimezone=Asia/Shanghai&quot;</span> -D<span class="token string">&quot;spring.datasource.username=root&quot;</span> -D<span class="token string">&quot;spring.datasource.password=root&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span> -D<span class="token string">&quot;alpha.server.port=8081&quot;</span> -D<span class="token string">&quot;server.port=8091&quot;</span>  <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、ServiceComb Pack(Saga)实例3</p><p>切换到什么目录 D:\apache-servicecomb-pack-distribution-0.5.0-bin 使用cmd</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>然后进入application.yaml
修改alpha.server.port<span class="token operator">=</span><span class="token number">8082</span>
修改server.port<span class="token operator">=</span><span class="token number">8092</span>
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span>  <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar

或者不修改application.yaml配置文件直接启动
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;spring.datasource.url=jdbc:mysql://localhost:3306/saga?useSSL=false&amp;serverTimezone=Asia/Shanghai&quot;</span> -D<span class="token string">&quot;spring.datasource.username=root&quot;</span> -D<span class="token string">&quot;spring.datasource.password=root&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span> -D<span class="token string">&quot;alpha.server.port=8082&quot;</span> -D<span class="token string">&quot;server.port=8092&quot;</span>  <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4、分别连接到不同的集群进行操作数据库</p><h2 id="servicecomb-pack-saga-协调器集群如何实现负载均衡" tabindex="-1"><a class="header-anchor" href="#servicecomb-pack-saga-协调器集群如何实现负载均衡" aria-hidden="true">#</a> ServiceComb Pack(Saga)协调器集群如何实现负载均衡</h2><p>条件</p><p>1、Nginx</p><p>步骤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">1</span>、先进入nginx/conf目录
配置
server <span class="token punctuation">{</span>
        listen       <span class="token number">8089</span> http2<span class="token punctuation">;</span>
        server_name  localhost<span class="token punctuation">;</span>
        location / <span class="token punctuation">{</span>
            grpc_pass grpc://grpcservers<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

upstream grpcservers <span class="token punctuation">{</span>
  server localhost:8080<span class="token punctuation">;</span> <span class="token comment">#后端 8080 地址</span>
  server localhost:8081<span class="token punctuation">;</span> <span class="token comment">#后端 8081 地址</span>
 <span class="token punctuation">}</span>
<span class="token comment"># 支持的不是很好，</span>
<span class="token comment"># https方式可以解决</span>
<span class="token comment"># openssl搞定</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="servicecomb-pack-saga-注册到consul" tabindex="-1"><a class="header-anchor" href="#servicecomb-pack-saga-注册到consul" aria-hidden="true">#</a> ServiceComb Pack (saga)注册到consul</h2><p>条件</p><p>1、consul</p><p>步骤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">1</span>、先进入到bootstrap.yaml文件

修改spring.cloud.consul.enabled<span class="token operator">=</span>true

<span class="token number">2</span>、然后进入application.yaml

修改spring.cloud.consul.host<span class="token operator">=</span>localhost

修改spring.cloud.consul.port<span class="token operator">=</span><span class="token number">8500</span>

<span class="token number">3</span>、然后启动consul服务器

consul agent <span class="token parameter variable">-dev</span>

单个实例启动
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar

或者不修改bootstrap.yaml和application.yaml配置文件，直接启动
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;spring.datasource.url=jdbc:mysql://localhost:3306/saga?useSSL=false&amp;serverTimezone=Asia/Shanghai&quot;</span> -D<span class="token string">&quot;spring.datasource.username=root&quot;</span> -D<span class="token string">&quot;spring.datasource.password=root&quot;</span> -D<span class="token string">&quot;spring.cloud.consul.host=http://127.0.0.1&quot;</span> -D<span class="token string">&quot;spring.cloud.consul.port=8500&quot;</span> -D<span class="token string">&quot;spring.cloud.consul.enabled=true&quot;</span> <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar

集群启动
先启动Master节点
<span class="token function">java</span> -D<span class="token string">&quot;spring.profiles.active=mysql&quot;</span> -D<span class="token string">&quot;loader.path=./plugins&quot;</span> -D<span class="token string">&quot;alpha.cluster.master.enabled=true&quot;</span>  <span class="token parameter variable">-jar</span> alpha-server-0.5.0-exec.jar

然后启动Slaver节点
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意细节：注册consul时 实例名称过长，默认的数据库表字段长度36过短，修改100长度即可，否则会报错。</p><p><img src="/images/abpmicroservices/micro009/abpmicroservices0009_0010image.png" alt="Alt text"></p><p>2、consul客户端查看</p><h2 id="saga协调器集群如何在微服务里面进行通用封装" tabindex="-1"><a class="header-anchor" href="#saga协调器集群如何在微服务里面进行通用封装" aria-hidden="true">#</a> Saga协调器集群如何在微服务里面进行通用封装</h2><p>条件</p><p>1、DistributedTransactionServiceCollectionExtensions</p><p>步骤</p><p>创建DistributedTransactionServiceCollectionExtensions类</p><div class="language-c# line-numbers-mode" data-ext="c#"><pre class="language-c#"><code>public static class DistributedTransactionServiceCollectionExtensions
    {
        public static IServiceCollection AddOmegaCoreCluster(this IServiceCollection services, string omegaServiceName, string ServiceName)
        {
            // 1、注册Omega服务发现
            services.AddSingleton&lt;OmegaConsulServiceDiscovery&gt;();
            ServiceProvider serviceProvider = services.BuildServiceProvider();
            // 2、获取Omega服务发现
            OmegaConsulServiceDiscovery omega = serviceProvider.GetService&lt;OmegaConsulServiceDiscovery&gt;();
            IList&lt;ServiceUrl&gt; serviceUrls = omega.Discovery(omegaServiceName).Result;
            // 3、获取负载均衡
            ILoadBalance loadBalance = serviceProvider.GetService&lt;ILoadBalance&gt;();
            ServiceUrl serviceUrl = loadBalance.Select(serviceUrls);
            services.AddOmegaCore(option =&gt;
            {
                option.GrpcServerAddress = serviceUrl.Url; // 1、协调中心地址
                option.InstanceId = ServiceName + Guid.NewGuid().ToString();// 2、服务实例Id
                option.ServiceName = ServiceName;// 3、服务名称
            });
            return services;
        }
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-c1c3c937.js" defer></script>
  </body>
</html>
